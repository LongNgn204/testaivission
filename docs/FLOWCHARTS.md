# ğŸ“Š Vision Coach - Website Flowcharts

> TÃ i liá»‡u nÃ y mÃ´ táº£ toÃ n bá»™ luá»“ng hoáº¡t Ä‘á»™ng cá»§a á»©ng dá»¥ng Vision Coach thÃ´ng qua cÃ¡c sÆ¡ Ä‘á»“ flowchart.

---

## ğŸ“‘ Má»¥c Lá»¥c

1. [Tá»•ng Quan Kiáº¿n TrÃºc](#1-tá»•ng-quan-kiáº¿n-trÃºc)
2. [Luá»“ng XÃ¡c Thá»±c (Authentication Flow)](#2-luá»“ng-xÃ¡c-thá»±c)
3. [Luá»“ng Trang Chá»§ (Home Page Flow)](#3-luá»“ng-trang-chá»§)
4. [Luá»“ng Kiá»ƒm Tra Thá»‹ Lá»±c (Vision Tests Flow)](#4-luá»“ng-kiá»ƒm-tra-thá»‹-lá»±c)
5. [Luá»“ng AI Assistant (Eva)](#5-luá»“ng-ai-assistant)
6. [Luá»“ng Admin Dashboard](#6-luá»“ng-admin-dashboard)
7. [Luá»“ng Dá»¯ Liá»‡u (Data Flow)](#7-luá»“ng-dá»¯-liá»‡u)
8. [SÆ¡ Äá»“ CÃ¡c Trang](#8-sÆ¡-Ä‘á»“-cÃ¡c-trang)

---

## 1. Tá»•ng Quan Kiáº¿n TrÃºc

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           VISION COACH ARCHITECTURE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Landing   â”‚â”€â”€â”€â–¶â”‚    Auth     â”‚â”€â”€â”€â–¶â”‚    Setup    â”‚â”€â”€â”€â–¶â”‚   â”‚     Home     â”‚       â”‚
â”‚  â”‚    Page     â”‚    â”‚    Page     â”‚    â”‚    Page     â”‚    Page     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                   â”‚              â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚                      â”‚                                           â”‚              â”‚
â”‚                      â–¼                                           â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         VISION TESTS              â”‚    â”‚         USER FEATURES            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚ Snellen â”‚ â”‚Colorblndâ”‚         â”‚    â”‚  â”‚ History â”‚ â”‚ Progressâ”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚Astigmat â”‚ â”‚  Amsler â”‚         â”‚    â”‚  â”‚Remindersâ”‚ â”‚ Profile â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   â”‚
â”‚  â”‚  â”‚Duochromeâ”‚                     â”‚    â”‚  â”‚Hospital â”‚                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚    â”‚  â”‚ Locator â”‚                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        EVA AI ASSISTANT (Floating)                        â”‚   â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚           â”‚  Chat Text   â”‚              â”‚  Voice Chat  â”‚                  â”‚   â”‚
â”‚  â”‚           â”‚  (LLAMA 3.1) â”‚              â”‚  (Web Speech)â”‚                  â”‚   â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                           ADMIN DASHBOARD                                 â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚    â”‚Dashboard â”‚ â”‚  Users   â”‚ â”‚ Records  â”‚ â”‚Analytics â”‚ â”‚ Settings â”‚     â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Luá»“ng XÃ¡c Thá»±c

```mermaid
flowchart TD
    A[ğŸ  Welcome Page] --> B{NgÆ°á»i dÃ¹ng click<br>Báº¯t Ä‘áº§u/ÄÄƒng nháº­p?}
    
    B --> C[ğŸ“ Auth Page]
    
    C --> D{CÃ³ tÃ i khoáº£n<br>Ä‘Ã£ lÆ°u?}
    
    D -->|CÃ³| E[Hiá»ƒn thá»‹ danh sÃ¡ch<br>tÃ i khoáº£n Ä‘Ã£ lÆ°u]
    D -->|KhÃ´ng| F[Form Ä‘Äƒng nháº­p má»›i]
    
    E --> G{Chá»n tÃ i khoáº£n<br>hoáº·c Ä‘Äƒng nháº­p má»›i}
    G -->|Chá»n TK cÅ©| H[Auto-fill form]
    G -->|ÄÄƒng nháº­p má»›i| F
    
    F --> I[Nháº­p Name/Phone/Age]
    H --> I
    
    I --> J{Validate form}
    J -->|Lá»—i| K[Hiá»ƒn thá»‹ lá»—i]
    K --> I
    
    J -->|OK| L[Gá»i API Login]
    L --> M{ÄÄƒng nháº­p<br>thÃ nh cÃ´ng?}
    
    M -->|Lá»—i| N[Hiá»ƒn thá»‹ lá»—i API]
    N --> I
    
    M -->|OK| O[LÆ°u token + user info]
    O --> P{ÄÃ£ setup<br>routine?}
    
    P -->|ChÆ°a| Q[âš™ï¸ Setup Page]
    P -->|Rá»“i| R[ğŸ  Home Page]
    
    Q --> S[Tráº£ lá»i cÃ¢u há»i 1-4]
    S --> T[AI táº¡o Weekly Routine]
    T --> U[LÆ°u routine]
    U --> R
    
    subgraph Demo Login
    V[ğŸ® Demo Login Button]
    V --> W[Sá»­ dá»¥ng Demo Account]
    W --> O
    end
    
    style A fill:#e1f5fe
    style R fill:#c8e6c9
    style Q fill:#fff3e0
```

### Chi tiáº¿t Auth Page Flow:

| BÆ°á»›c | MÃ´ táº£ | Component |
|------|-------|-----------|
| 1 | Hiá»ƒn thá»‹ form Ä‘Äƒng nháº­p | `AuthPage.tsx` |
| 2 | Validate: Name (2+ kÃ½ tá»±), Phone (10 sá»‘), Age (1-120) | `validateForm()` |
| 3 | Gá»i API `/api/auth/login` | `authService.loginUser()` |
| 4 | LÆ°u token vÃ o localStorage | `saveAuthToken()` |
| 5 | LÆ°u thÃ´ng tin user vÃ o context | `UserContext` |
| 6 | Redirect theo tráº¡ng thÃ¡i setup | `App.tsx` |

---

## 3. Luá»“ng Trang Chá»§

```mermaid
flowchart TD
    A[ğŸ  Home Page Mount] --> B[Load Test History<br>tá»« localStorage]
    
    B --> C[Gá»i AI Dashboard Insights]
    C --> D{AI Response<br>thÃ nh cÃ´ng?}
    
    D -->|Lá»—i| E[Hiá»ƒn thá»‹ Empty State]
    D -->|OK| F[Hiá»ƒn thá»‹ Dashboard Content]
    
    F --> G[Vision Wellness Score]
    F --> H[AI Trend Analysis]
    F --> I[Recommendations]
    
    subgraph "Today's Plan Section"
    J[Láº¥y weeklyRoutine tá»« Context]
    J --> K[Lá»c activities theo ngÃ y]
    K --> L{CÃ³ activities<br>hÃ´m nay?}
    L -->|KhÃ´ng| M[Hiá»ƒn thá»‹ Rest Day]
    L -->|CÃ³| N[Render Activity Cards]
    end
    
    N --> O{Click Activity?}
    O -->|Test| P[Navigate /home/test/xxx]
    O -->|Exercise thÆ°á»ng| Q[Má»Ÿ Exercise Modal]
    O -->|Focus Change| R[Má»Ÿ Interactive Modal]
    
    Q --> S[Hiá»ƒn thá»‹ hÆ°á»›ng dáº«n]
    R --> T[BÃ i táº­p tÆ°Æ¡ng tÃ¡c AI]
    
    subgraph "All Tests Section"
    U[Render Test Cards Grid]
    U --> V{Click Test Card?}
    V --> W[Navigate to Test Page]
    end
    
    subgraph "Tour Guide"
    X{First-time user<br>& No history?}
    X -->|Yes| Y[Auto-start Tour]
    Y --> Z[Highlight Dashboard]
    Z --> AA[Highlight Today's Plan]
    AA --> BB[Highlight Tests]
    BB --> CC[Highlight Eva]
    end
    
    style A fill:#e3f2fd
    style F fill:#c8e6c9
    style P fill:#fff9c4
    style W fill:#fff9c4
```

### Dashboard Data Flow:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HOME PAGE DATA FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   Storage    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    Hook      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Dashboard â”‚ â”‚
â”‚   â”‚   Service    â”‚         â”‚useDashboard- â”‚         â”‚  Content   â”‚ â”‚
â”‚   â”‚getTestHistoryâ”‚         â”‚   Insights   â”‚         â”‚ Component  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                                 â”‚
â”‚                                   â–¼                                 â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                          â”‚  AI Service  â”‚                          â”‚
â”‚                          â”‚  (Gemini/    â”‚                          â”‚
â”‚                          â”‚  OpenRouter) â”‚                          â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   Routine    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  useRoutine  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Today's   â”‚ â”‚
â”‚   â”‚   Context    â”‚         â”‚    Hook      â”‚         â”‚   Plan     â”‚ â”‚
â”‚   â”‚ weeklyRoutineâ”‚         â”‚              â”‚         â”‚  Section   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Luá»“ng Kiá»ƒm Tra Thá»‹ Lá»±c

### 4.1 Flow Chung Cho Táº¥t Cáº£ Tests

```mermaid
flowchart TD
    A[ğŸ¯ Test Page Mount] --> B[TestShell Component]
    B --> C[Start Screen]
    
    C --> D{User click Start?}
    D -->|Yes| E[Initialize Test Service]
    
    E --> F[Generate Questions]
    F --> G[Test Screen]
    
    G --> H{User tráº£ lá»i}
    H --> I[Record Answer]
    I --> J{CÃ²n cÃ¢u há»i?}
    
    J -->|Yes| G
    J -->|No| K[Calculate Results]
    
    K --> L[Generate AI Report]
    L --> M{AI Report<br>thÃ nh cÃ´ng?}
    
    M -->|Error| N[Fallback Report]
    M -->|OK| O[Complete Report]
    
    N --> P[Save to Storage]
    O --> P
    
    P --> Q[Sync to Backend]
    Q --> R[Update Streak]
    R --> S[Show Complete View]
    
    S --> T{User action?}
    T -->|View Report| U[Report Detail Modal]
    T -->|Retake| A
    T -->|Share| V[Share Options]
    T -->|Home| W[Navigate Home]
    
    style A fill:#e8eaf6
    style S fill:#c8e6c9
    style L fill:#fff3e0
```

### 4.2 Chi Tiáº¿t Tá»«ng Loáº¡i Test

#### Snellen Test (Thá»‹ lá»±c)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SNELLEN TEST FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   ADAPTIVE ALGORITHM:                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                             â”‚   
â”‚   â”‚   Start Level: 5 (20/40)                                    â”‚   
â”‚   â”‚                                                             â”‚   
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚   â”‚   â”‚ Show  â”‚â”€â”€â”€â”€â”€â–¶â”‚User selectsâ”‚â”€â”€â”€â”€â”€â–¶â”‚  Check    â”‚         â”‚   
â”‚   â”‚   â”‚  "E"  â”‚      â”‚ direction â”‚      â”‚  Answer   â”‚           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚   â”‚                                           â”‚                  â”‚   â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚                    â”‚                                      â”‚  â”‚   â”‚
â”‚   â”‚                    â–¼                                      â–¼  â”‚   â”‚
â”‚   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚   â”‚           â”‚    CORRECT     â”‚                    â”‚  WRONG   â”‚â”‚   â”‚
â”‚   â”‚           â”‚ correct++ = 2  â”‚                    â”‚ wrong++  â”‚â”‚   â”‚
â”‚   â”‚           â”‚ â†’ Level UP     â”‚                    â”‚ â†’ END    â”‚â”‚   â”‚
â”‚   â”‚           â”‚ (smaller size) â”‚                    â”‚  TEST    â”‚â”‚   â”‚
â”‚   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Level Scale: 20/200 â†’ 20/100 â†’ 20/70 â†’ 20/40 â†’ 20/20     â”‚   â”‚
â”‚   â”‚   (9 levels total)                                          â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Result Categories:                                                 â”‚
â”‚   â€¢ 20/20, 20/25: Excellent (Tuyá»‡t vá»i)                             â”‚
â”‚   â€¢ 20/30, 20/40: Good (Tá»‘t)                                        â”‚
â”‚   â€¢ 20/50, 20/70: Fair (Cáº§n chÃº Ã½)                                  â”‚
â”‚   â€¢ 20/100+: Poor (Cáº§n khÃ¡m)                                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Color Blind Test (Ishihara)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COLOR BLIND TEST FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   20 Ishihara Plates:                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Plate 1-5: Demonstration plates                           â”‚   â”‚
â”‚   â”‚   Plate 6-10: Red-Green deficiency                          â”‚   â”‚
â”‚   â”‚   Plate 11-15: Blue-Yellow deficiency                       â”‚   â”‚
â”‚   â”‚   Plate 16-20: Advanced detection                           â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   For each plate:                                            â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚   â”‚   â”‚  Display â”‚â”€â”€â”€â”€â–¶â”‚User typesâ”‚â”€â”€â”€â”€â–¶â”‚ Compare  â”‚            â”‚   â”‚
â”‚   â”‚   â”‚  Plate   â”‚     â”‚  number  â”‚     â”‚ answer   â”‚            â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚   â”‚                                          â”‚                   â”‚   â”‚
â”‚   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚   â”‚           â–¼                                                  â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚   â”‚   â”‚ Score Matrix:                              â”‚             â”‚   â”‚
â”‚   â”‚   â”‚ â€¢ Correct answer â†’ +1 correct              â”‚             â”‚   â”‚
â”‚   â”‚   â”‚ â€¢ Wrong answer â†’ analyze pattern           â”‚             â”‚   â”‚
â”‚   â”‚   â”‚ â€¢ Pattern â†’ detect deficiency type         â”‚             â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Result Types:                                                      â”‚
â”‚   â€¢ Normal Vision (BÃ¬nh thÆ°á»ng)                                     â”‚
â”‚   â€¢ Protanopia (MÃ¹ Ä‘á»)                                              â”‚
â”‚   â€¢ Deuteranopia (MÃ¹ xanh lÃ¡)                                       â”‚
â”‚   â€¢ Tritanopia (MÃ¹ xanh dÆ°Æ¡ng)                                      â”‚
â”‚   â€¢ Mild Color Weakness (Yáº¿u mÃ u nháº¹)                               â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Astigmatism Test

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ASTIGMATISM TEST FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Display: Astigmatism Wheel (radial lines)                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Test each eye separately:                                  â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚   â”‚   â”‚  Show    â”‚â”€â”€â”€â”€â–¶â”‚ User     â”‚â”€â”€â”€â”€â–¶â”‚  Record  â”‚            â”‚   â”‚
â”‚   â”‚   â”‚  Wheel   â”‚     â”‚ selects  â”‚     â”‚  Answer  â”‚            â”‚   â”‚
â”‚   â”‚   â”‚          â”‚     â”‚ darkest  â”‚     â”‚          â”‚            â”‚   â”‚
â”‚   â”‚   â”‚          â”‚     â”‚ lines    â”‚     â”‚          â”‚            â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Options:                                                   â”‚   â”‚
â”‚   â”‚   â€¢ All lines equal â†’ No astigmatism                        â”‚   â”‚
â”‚   â”‚   â€¢ Some darker â†’ Possible astigmatism                      â”‚   â”‚
â”‚   â”‚   â€¢ Axis angle detected â†’ Specific type                     â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Result Categories:                                                 â”‚
â”‚   â€¢ No Astigmatism                                                  â”‚
â”‚   â€¢ Mild Astigmatism (axis noted)                                  â”‚
â”‚   â€¢ Moderate Astigmatism                                            â”‚
â”‚   â€¢ Significant Astigmatism (consultation recommended)              â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Amsler Grid Test

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AMSLER GRID TEST FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Display: Grid with central dot                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Instructions:                                              â”‚   â”‚
â”‚   â”‚   1. Cover one eye                                           â”‚   â”‚
â”‚   â”‚   2. Focus on central dot                                    â”‚   â”‚
â”‚   â”‚   3. Report any distortions                                  â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Questions for each eye:                                    â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚   â”‚   â”‚ Q1: CÃ³ tháº¥y Ä‘iá»ƒm Ä‘en trung tÃ¢m?         â”‚               â”‚   â”‚
â”‚   â”‚   â”‚ Q2: CÃ¡c Ä‘Æ°á»ng cÃ³ tháº³ng khÃ´ng?           â”‚               â”‚   â”‚
â”‚   â”‚   â”‚ Q3: CÃ³ vÃ¹ng má» hoáº·c trá»‘ng khÃ´ng?        â”‚               â”‚   â”‚
â”‚   â”‚   â”‚ Q4: CÃ³ vÃ¹ng bá»‹ uá»‘n cong khÃ´ng?          â”‚               â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Result Interpretation:                                            â”‚
â”‚   â€¢ Normal: All lines straight, center visible, no gaps            â”‚
â”‚   â€¢ Abnormal: Wavy lines, blind spots, distortions                 â”‚
â”‚   â†’ May indicate macular degeneration (ThoÃ¡i hÃ³a Ä‘iá»ƒm vÃ ng)        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Duochrome Test

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DUOCHROME TEST FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Display: Red-Green split screen with optotypes                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚   â”‚
â”‚   â”‚   â”‚    RED      â”‚    GREEN    â”‚                              â”‚   â”‚
â”‚   â”‚   â”‚   (Left)    â”‚   (Right)   â”‚                              â”‚   â”‚
â”‚   â”‚   â”‚             â”‚             â”‚                              â”‚   â”‚
â”‚   â”‚   â”‚    Text     â”‚    Text     â”‚                              â”‚   â”‚
â”‚   â”‚   â”‚             â”‚             â”‚                              â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   Question: Which side is clearer?                           â”‚   â”‚
â”‚   â”‚   â€¢ Red side â†’ Overcorrected (farsighted tendency)          â”‚   â”‚
â”‚   â”‚   â€¢ Green side â†’ Undercorrected (nearsighted tendency)      â”‚   â”‚
â”‚   â”‚   â€¢ Equal â†’ Correct prescription                            â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Purpose: Check if current glasses prescription is accurate       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Luá»“ng AI Assistant

### 5.1 Chat Interface Flow

```mermaid
flowchart TD
    A[ğŸ‘† Click Chat Button] --> B[Open ChatInterface Modal]
    
    B --> C[Load conversation history<br>from localStorage]
    C --> D[Display messages]
    
    D --> E{User nháº­p message?}
    E -->|Yes| F[Add user message to UI]
    
    F --> G[Prepare AI request]
    G --> H{VITE_GEMINI_API_KEY<br>available?}
    
    H -->|No| I[Use Cloudflare Workers AI<br>LLAMA 3.1]
    H -->|Yes| J[Use Gemini API]
    
    I --> K[Call /api/ai/chat]
    J --> L[Call Gemini directly]
    
    K --> M{Response OK?}
    L --> M
    
    M -->|Error| N[Show error message]
    M -->|OK| O[Add AI response to UI]
    
    N --> D
    O --> P[Save to history]
    P --> D
    
    subgraph "AI Context"
    Q[System Prompt:<br>Dr. Eva - Eye specialist]
    R[Conversation history]
    S[User health data]
    end
    
    style A fill:#c8e6c9
    style J fill:#fff3e0
    style I fill:#e3f2fd
```

### 5.2 Voice Interface Flow

```mermaid
flowchart TD
    A[ğŸ¤ Click Voice Button] --> B[Open VoiceInterface Modal]
    
    B --> C[Check browser support<br>Web Speech API]
    C --> D{Supported?}
    
    D -->|No| E[Show unsupported message]
    D -->|Yes| F[Initialize SpeechRecognition]
    
    F --> G{User click record?}
    G -->|Yes| H[Start listening]
    
    H --> I[Display waveform animation]
    I --> J{Speech detected?}
    
    J -->|Yes| K[Convert Speech to Text]
    K --> L[Stop recording]
    
    L --> M[Send text to AI]
    M --> N{AI Response?}
    
    N -->|Error| O[Speak error message]
    N -->|OK| P[Get AI text response]
    
    P --> Q[Use SpeechSynthesis<br>Text-to-Speech]
    Q --> R[Eva speaks response]
    
    R --> S{User speaks again?}
    S -->|Yes| G
    S -->|Close| T[Close modal]
    
    style A fill:#90caf9
    style R fill:#c8e6c9
    style Q fill:#fff3e0
```

---

## 6. Luá»“ng Admin Dashboard

```mermaid
flowchart TD
    A[ğŸ” Admin Access] --> B{Has admin_token<br>in localStorage?}
    
    B -->|No| C[Admin Login Page]
    B -->|Yes| D[Admin Dashboard]
    
    C --> E[Enter admin credentials]
    E --> F[Call /api/admin/login]
    F --> G{Login success?}
    
    G -->|No| H[Show error]
    G -->|Yes| I[Save token]
    I --> D
    
    H --> C
    
    D --> J{Select page?}
    
    J -->|Dashboard| K[ğŸ“Š Dashboard Page]
    J -->|Users| L[ğŸ‘¥ Users Page]
    J -->|Records| M[ğŸ“‹ Records Page]
    J -->|Analytics| N[ğŸ“ˆ Analytics Page]
    J -->|Settings| O[âš™ï¸ Settings Page]
    
    K --> P[Load stats from API]
    P --> Q[Display overview cards]
    Q --> R[Recent activity feed]
    
    L --> S[Fetch /api/admin/users]
    S --> T[Display user list]
    T --> U[Search/Filter users]
    
    M --> V[Fetch /api/admin/records]
    V --> W[Display test records]
    W --> X[View individual reports]
    
    N --> Y[Load analytics data]
    Y --> Z[Charts & Graphs]
    Z --> AA[Export reports]
    
    O --> BB[System settings]
    BB --> CC[AI configuration]
    
    style D fill:#e8eaf6
    style C fill:#ffcdd2
```

---

## 7. Luá»“ng Dá»¯ Liá»‡u

### 7.1 Data Storage Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA STORAGE LAYERS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                        CLIENT LAYER                                   â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â”‚   localStorage                    â”‚  React Context                   â”‚ â”‚
â”‚   â”‚   â”œâ”€ test_history_v2              â”‚  â”œâ”€ UserContext (auth)           â”‚ â”‚
â”‚   â”‚   â”œâ”€ user_auth_v2                 â”‚  â”œâ”€ RoutineContext (weekly)      â”‚ â”‚
â”‚   â”‚   â”œâ”€ weekly_routine               â”‚  â”œâ”€ LanguageContext (i18n)       â”‚ â”‚
â”‚   â”‚   â”œâ”€ completed_activities         â”‚  â”œâ”€ ThemeContext (dark/light)    â”‚ â”‚
â”‚   â”‚   â”œâ”€ eva_chat_history             â”‚  â””â”€ TourGuideContext             â”‚ â”‚
â”‚   â”‚   â”œâ”€ reminders                    â”‚                                   â”‚ â”‚
â”‚   â”‚   â”œâ”€ streak_data                  â”‚                                   â”‚ â”‚
â”‚   â”‚   â””â”€ admin_token                  â”‚                                   â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚                                    â”‚
â”‚                                        â–¼                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                        SYNC LAYER                                     â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â”‚   StorageService                                                      â”‚ â”‚
â”‚   â”‚   â”œâ”€ saveTestResult() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚ â”‚
â”‚   â”‚   â”œâ”€ getTestHistory()                       â”‚                         â”‚ â”‚
â”‚   â”‚   â””â”€ clearHistory()                         â”‚                         â”‚ â”‚
â”‚   â”‚                                             â”‚                         â”‚ â”‚
â”‚   â”‚   authService                               â”‚                         â”‚ â”‚
â”‚   â”‚   â”œâ”€ syncUserData() â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚ â”‚
â”‚   â”‚   â””â”€ getTestHistory(userId)                 â”‚                         â”‚ â”‚
â”‚   â”‚                                             â–¼                         â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚                                    â”‚
â”‚                                        â–¼                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                        BACKEND LAYER                                  â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â”‚   Cloudflare Workers                           Cloudflare D1          â”‚ â”‚
â”‚   â”‚   â”œâ”€ /api/auth/login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€ users table          â”‚ â”‚
â”‚   â”‚   â”œâ”€ /api/test-records â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€ test_records table   â”‚ â”‚
â”‚   â”‚   â”œâ”€ /api/ai/report â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€ ai_reports table     â”‚ â”‚
â”‚   â”‚   â”œâ”€ /api/admin/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â””â”€ admin_logs table     â”‚ â”‚
â”‚   â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”‚                            External APIs                          â”‚ â”‚
â”‚   â”‚   â”œâ”€ /api/ai/chat â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Cloudflare Workers AI   â”‚ â”‚
â”‚   â”‚   â””â”€ Direct calls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Google Gemini API       â”‚ â”‚
â”‚   â”‚                                                                       â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Test Result Sync Flow

```mermaid
sequenceDiagram
    participant U as User
    participant T as Test Component
    participant S as StorageService
    participant L as localStorage
    participant A as AuthService
    participant B as Backend API

    U->>T: Complete test
    T->>T: Calculate results
    T->>T: Generate AI report
    
    T->>S: saveTestResult(result)
    S->>L: Save to test_history_v2
    
    alt User is logged in
        S->>A: Check auth status
        A->>B: POST /api/test-records
        B-->>A: Success/Error
        A-->>S: Sync status
    end
    
    S-->>T: Save complete
    T->>U: Show results
```

---

## 8. SÆ¡ Äá»“ CÃ¡c Trang

### 8.1 Navigation Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PAGE NAVIGATION MAP                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   PUBLIC ROUTES (No auth required)                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   /                           /login                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
â”‚   â”‚   â”‚ WelcomePage  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   AuthPage   â”‚                       â”‚   â”‚
â”‚   â”‚   â”‚ (Landing)    â”‚           â”‚ (Login/Reg)  â”‚                       â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚   â”‚                                      â”‚                               â”‚   â”‚
â”‚   â”‚                                      â–¼                               â”‚   â”‚
â”‚   â”‚                              /setup                                  â”‚   â”‚
â”‚   â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
â”‚   â”‚                              â”‚Personalized- â”‚                       â”‚   â”‚
â”‚   â”‚                              â”‚  SetupPage   â”‚                       â”‚   â”‚
â”‚   â”‚                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚   â”‚                                      â”‚                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                   â”‚
â”‚   PROTECTED ROUTES (Auth required)       â”‚                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                      â–¼                               â”‚   â”‚
â”‚   â”‚   /home                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚   â”‚
â”‚   â”‚   â”‚     Home     â”‚                                                  â”‚   â”‚
â”‚   â”‚   â”‚  (Dashboard) â”‚                                                  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚   â”‚          â”‚                                                           â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚   â”‚   â”‚              â”‚           â”‚           â”‚           â”‚              â”‚   â”‚
â”‚   â”‚   â–¼              â–¼           â–¼           â–¼           â–¼              â”‚   â”‚
â”‚   â”‚   /home/test/*   /home/      /home/      /home/      /home/         â”‚   â”‚
â”‚   â”‚                  history     progress    reminders   profile        â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚   â”‚   â”‚ Tests:  â”‚   â”‚History â”‚  â”‚Progressâ”‚  â”‚Remind- â”‚  â”‚Health  â”‚     â”‚   â”‚
â”‚   â”‚   â”‚â€¢snellen â”‚   â”‚  Page  â”‚  â”‚  Page  â”‚  â”‚  ers   â”‚  â”‚Profile â”‚     â”‚   â”‚
â”‚   â”‚   â”‚â€¢colorblndâ”‚  â”‚        â”‚  â”‚        â”‚  â”‚        â”‚  â”‚        â”‚     â”‚   â”‚
â”‚   â”‚   â”‚â€¢astigmatâ”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚   â”‚   â”‚â€¢amsler  â”‚                                                       â”‚   â”‚
â”‚   â”‚   â”‚â€¢duochromâ”‚   /home/hospitals                                     â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚   â”‚
â”‚   â”‚                 â”‚  Hospital    â”‚                                    â”‚   â”‚
â”‚   â”‚                 â”‚   Locator    â”‚                                    â”‚   â”‚
â”‚   â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   /home/admin                                                        â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚   â”‚   â”‚                    Admin Dashboard                    â”‚          â”‚   â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚   â”‚
â”‚   â”‚   â”‚   â”‚Dashboardâ”‚ â”‚ Users   â”‚ â”‚ Records â”‚ â”‚Analyticsâ”‚   â”‚          â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Page Details

| Route | Component | Má»¥c Ä‘Ã­ch |
|-------|-----------|----------|
| `/` | `WelcomePage` | Landing page vá»›i hero, features, CTA |
| `/login` | `AuthPage` | ÄÄƒng nháº­p/ÄÄƒng kÃ½ vá»›i Name/Phone/Age |
| `/setup` | `PersonalizedSetupPage` | Setup weekly routine vá»›i AI |
| `/home` | `Home` | Dashboard chÃ­nh, Today's Plan, All Tests |
| `/home/history` | `History` | Lá»‹ch sá»­ cÃ¡c bÃ i test Ä‘Ã£ lÃ m |
| `/home/progress` | `ProgressPage` | Biá»ƒu Ä‘á»“ tiáº¿n trÃ¬nh, AI insights |
| `/home/reminders` | `RemindersPage` | Nháº¯c nhá»Ÿ, streak, badges |
| `/home/profile` | `HealthProfile` | Há»“ sÆ¡ sá»©c khá»e máº¯t |
| `/home/hospitals` | `HospitalLocator` | TÃ¬m bá»‡nh viá»‡n máº¯t gáº§n nháº¥t |
| `/home/test/snellen` | `SnellenTest` | Test thá»‹ lá»±c Snellen |
| `/home/test/colorblind` | `ColorBlindTest` | Test mÃ¹ mÃ u Ishihara |
| `/home/test/astigmatism` | `AstigmatismTest` | Test loáº¡n thá»‹ |
| `/home/test/amsler` | `AmslerGridTest` | Test lÆ°á»›i Amsler |
| `/home/test/duochrome` | `DuochromeTest` | Test Duochrome |
| `/home/admin` | `AdminApp` | Admin panel quáº£n lÃ½ |

---

## ğŸ“ Ghi ChÃº Ká»¹ Thuáº­t

### Context Providers Hierarchy

```jsx
<ErrorBoundary>
  <ThemeProvider>
    <LanguageProvider>
      <RoutineProvider>
        <UserProvider>
          <VoiceControlProvider>
            <TourGuideProvider>
              <HashRouter>
                <App />
              </HashRouter>
            </TourGuideProvider>
          </VoiceControlProvider>
        </UserProvider>
      </RoutineProvider>
    </LanguageProvider>
  </ThemeProvider>
</ErrorBoundary>
```

### Key Services

| Service | File | Chá»©c nÄƒng |
|---------|------|-----------|
| `StorageService` | `services/storageService.ts` | Quáº£n lÃ½ localStorage |
| `AIService` | `services/aiService.ts` | Gá»i AI APIs (Gemini/OpenRouter) |
| `AuthService` | `services/authService.ts` | Authentication & user data |
| `SnellenTestService` | `services/snellenTestService.ts` | Logic test Snellen |
| `ColorBlindTestService` | `services/colorBlindTestService.ts` | Logic test mÃ¹ mÃ u |
| `ReminderService` | `services/reminderService.ts` | Nháº¯c nhá»Ÿ & gamification |

---

*TÃ i liá»‡u Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi Antigravity AI Assistant*
*Cáº­p nháº­t láº§n cuá»‘i: 2025-12-11*
